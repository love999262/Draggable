!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Draggable=e():t.Draggable=e()}(window,function(){return function(t){var e={};function a(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=1)}([function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={$:function(t){return document.querySelector(t)},extend:function(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];var r=t||{};return r instanceof Object&&e.forEach(function(t){t instanceof Object&&Object.keys(t).forEach(function(e){switch(Object.prototype.toString.call(t[e])){case"[object Object]":t[e]=n.extend(r[e],t[e])}r[e]=t[e]})}),r},parseToDOM:function(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]},find:function(t,e){return t.querySelector(e)},addClass:function(t,e){var a=t.getAttribute("class");a+=" "+e,t.setAttribute("class",a)},removeClass:function(t,e){t.getAttribute("class").replace(e,"")},throttle:function(t){var e,a=this.extend({method:function(){},wait:1e3,ctx:this,immediate:!0,arguments:[]},t);return function(){a.immediate&&(a.method.apply(a.ctx,a.arguments),a.immediate=!1),e||(e=setTimeout(function(){e=null,a.method.apply(a.ctx,a.arguments)},a.wait))}},setData:function(t,e,a){t.dataset?t.dataset.key=a:t.setAttribute("data-"+e,a)},getData:function(t,e){return t.dataset?t.dataset.key:t.getAttribute("data-"+e)},show:function(t){t.style.cssText+=";display"+this.getData(t,"display")},hide:function(t){var e=window&&window.getComputedStyle(t).display||"block";this.setData(t,"display",e),t.style.cssText+=";display: none;"}};e.default=n},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(2);e.default=n.default},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(3),r=a(0),i=function(){return function(t){this.config=r.default.extend({axis:"both",cursor:"move"},t),this.draggableCore=new n.default(this.config)}}();e.default=i},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(0),r=a(4),i=function(){function t(t){this.dragging=!1,this.dragData={},this.config=t,this.container=n.default.$(t.selector),this.container.style.cssText+="cursor: "+this.config.cursor,this.registerEvent()}return t.prototype.registerEvent=function(){var t=this;this.container.addEventListener(r.default.start,function(e){t.onDragStart(e,t.dragData)}),document.addEventListener(r.default.move,function(e){t.dragData.deltaX=e.clientX-t.dragData.x,t.dragData.deltaY=e.clientY-t.dragData.y,t.onDrag(e,t.dragData)}),document.addEventListener(r.default.stop,function(e){t.dragData.lastX=e.clientX,t.dragData.lastY=e.clientY,t.onDragStop(e,t.dragData)})},t.prototype.onDragStart=function(t,e){this.dragging=!0;var a=getComputedStyle(this.container).transform;if("none"===a)return this.dragData.x=t.clientX,this.dragData.y=t.clientY,this.translateX=0,void(this.translateY=0);var n=a.split(",");this.translateX=Number(n[n.length-2]),this.translateY=Number(n[n.length-1].split(")")[0]),this.dragData.x=t.clientX-this.translateX,this.dragData.y=t.clientY-this.translateY},t.prototype.onDrag=function(t,e){if(this.dragging)switch(this.config.axis){case"both":this.container.style.cssText+="transform: translate("+this.dragData.deltaX+"px, "+this.dragData.deltaY+"px)";break;case"x":this.container.style.cssText+="transform: translate("+this.dragData.deltaX+"px, "+this.translateY+"px)";break;case"y":this.container.style.cssText+="transform: translate("+this.translateX+"px, "+this.dragData.deltaY+"px)";break;case"none":break;default:this.container.style.cssText+="transform: translate("+this.dragData.deltaX+"px, "+this.dragData.deltaY+"px)"}},t.prototype.onDragStop=function(t,e){this.dragData.deltaX=this.dragData.x-this.dragData.lastX,this.dragData.deltaY=this.dragData.y-this.dragData.lastY,this.dragging=!1},t}();e.default=i},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.events={start:"mousedown",move:"mousemove",stop:"mouseup"},e.default=e.events}]).default});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9EcmFnZ2FibGUvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL0RyYWdnYWJsZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9EcmFnZ2FibGUvLi9zcmMvanMvdXRpbHMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vRHJhZ2dhYmxlLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL0RyYWdnYWJsZS8uL3NyYy9qcy9jb21wb25lbnRzL2FwcC50cyIsIndlYnBhY2s6Ly9EcmFnZ2FibGUvLi9zcmMvanMvY29tcG9uZW50cy9kcmFnZ2FibGUtY29yZS50cyIsIndlYnBhY2s6Ly9EcmFnZ2FibGUvLi9zcmMvanMvdXRpbHMvZXZlbnQudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInV0aWxzIiwiJCIsInNlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZXh0ZW5kIiwidGFyZ2V0IiwiYXJncyIsIl9pIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwicmVzdWx0IiwiZm9yRWFjaCIsIm9iaiIsImtleXMiLCJ0b1N0cmluZyIsInBhcnNlVG9ET00iLCJzdHIiLCJlbGUiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiY2hpbGRyZW4iLCJmaW5kIiwicGFyZW50IiwiYWRkQ2xhc3MiLCJjbGFzc05hbWUiLCJ0bXBDbGFzcyIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUNsYXNzIiwicmVwbGFjZSIsInRocm90dGxlIiwiY29mIiwidGltZXIiLCJ0aGlzIiwibWV0aG9kIiwid2FpdCIsImN0eCIsImltbWVkaWF0ZSIsImFwcGx5Iiwic2V0VGltZW91dCIsInNldERhdGEiLCJkYXRhc2V0IiwiZ2V0RGF0YSIsInNob3ciLCJzdHlsZSIsImNzc1RleHQiLCJoaWRlIiwiZGlzcGxheVN0YXR1cyIsImdldENvbXB1dGVkU3R5bGUiLCJkaXNwbGF5IiwiZGVmYXVsdCIsImFwcF8xIiwiZHJhZ2dhYmxlX2NvcmVfMSIsInV0aWxzXzEiLCJEcmFnZ2FibGUiLCJjb25maWciLCJheGlzIiwiY3Vyc29yIiwiZHJhZ2dhYmxlQ29yZSIsImV2ZW50XzEiLCJEcmFnZ2FibGVDb3JlIiwiZHJhZ2dpbmciLCJkcmFnRGF0YSIsImNvbnRhaW5lciIsInJlZ2lzdGVyRXZlbnQiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdGFydCIsImUiLCJvbkRyYWdTdGFydCIsIm1vdmUiLCJkZWx0YVgiLCJjbGllbnRYIiwieCIsImRlbHRhWSIsImNsaWVudFkiLCJ5Iiwib25EcmFnIiwic3RvcCIsImxhc3RYIiwibGFzdFkiLCJvbkRyYWdTdG9wIiwiZGF0YSIsInRyYW5zU3R5bGUiLCJ0cmFuc2Zvcm0iLCJ0cmFuc2xhdGVYIiwidHJhbnNsYXRlWSIsInRyYW5zIiwic3BsaXQiLCJOdW1iZXIiLCJldmVudHMiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELElBQ0EsbUJBQUFHLGVBQUFDLElBQ0FELFVBQUFILEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsVUFBQUQsSUFFQUQsRUFBQSxVQUFB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U2lCLE1BQ3ZEOUMsS0FBSzZCLFNBQVNZLE9BQVN6QyxLQUFLNkIsU0FBU2MsRUFBSTNDLEtBQUs2QixTQUFTa0IsTUFDdkQvQyxLQUFLNEIsVUFBVyxHQUV4QkQsRUF2RUEsR0F3RUFyRyxFQUFBMkYsUUFBZVUsaUZDdEZGckcsRUFBQW1JLFFBQ1R2QixNQUFPLFlBQ1BHLEtBQU0sWUFDTlEsS0FBTSxXQUdWdkgsRUFBQTJGLFFBQWUzRixFQUFBbUkiLCJmaWxlIjoiZHJhZ2dhYmxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiRHJhZ2dhYmxlXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIkRyYWdnYWJsZVwiXSA9IGZhY3RvcnkoKTtcbn0pKHdpbmRvdywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiY29uc3QgdXRpbHMgPSB7XHJcbiAgICAkKHNlbGVjdG9yOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gICAgfSxcclxuICAgIGV4dGVuZCh0YXJnZXQ6IGFueSwgLi4uYXJnczogYW55W10pIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB0YXJnZXQgfHwge307XHJcbiAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIE9iamVjdCkge1xyXG4gICAgICAgICAgICBhcmdzLmZvckVhY2goKG9iajogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqW2tleV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdbb2JqZWN0IE9iamVjdF0nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialtrZXldID0gdXRpbHMuZXh0ZW5kKHJlc3VsdFtrZXldLCBvYmpba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBvYmpba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9LFxyXG4gICAgcGFyc2VUb0RPTShzdHI6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGVsZS5pbm5lckhUTUwgPSBzdHI7XHJcbiAgICAgICAgcmV0dXJuIGVsZS5jaGlsZHJlblswXTtcclxuICAgIH0sXHJcbiAgICBmaW5kKHBhcmVudDogSFRNTEVsZW1lbnQsIGNoaWxkcmVuOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoY2hpbGRyZW4pO1xyXG4gICAgfSxcclxuICAgIGFkZENsYXNzKGVsZTogSFRNTEVsZW1lbnQsIGNsYXNzTmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHRtcENsYXNzOiBzdHJpbmcgPSBlbGUuZ2V0QXR0cmlidXRlKCdjbGFzcycpO1xyXG4gICAgICAgIHRtcENsYXNzICs9IGAgJHtjbGFzc05hbWV9YDtcclxuICAgICAgICBlbGUuc2V0QXR0cmlidXRlKCdjbGFzcycsIHRtcENsYXNzKTtcclxuICAgIH0sXHJcbiAgICByZW1vdmVDbGFzcyhlbGU6IEhUTUxFbGVtZW50LCBjbGFzc05hbWU6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHRtcENsYXNzID0gZWxlLmdldEF0dHJpYnV0ZSgnY2xhc3MnKTtcclxuICAgICAgICB0bXBDbGFzcy5yZXBsYWNlKGNsYXNzTmFtZSwgJycpO1xyXG4gICAgfSxcclxuICAgIHRocm90dGxlKGNvZjogYW55KSB7XHJcbiAgICAgICAgY29uc3QgbyA9IHRoaXMuZXh0ZW5kKHtcclxuICAgICAgICAgICAgbWV0aG9kOiAoKSA9PiB7fSwgXHJcbiAgICAgICAgICAgIHdhaXQ6IDEwMDAsXHJcbiAgICAgICAgICAgIGN0eDogdGhpcyxcclxuICAgICAgICAgICAgaW1tZWRpYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICBhcmd1bWVudHM6IFtdLFxyXG4gICAgICAgIH0sIGNvZik7XHJcbiAgICAgICAgbGV0IHRpbWVyOiBudW1iZXI7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKG8uaW1tZWRpYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBvLm1ldGhvZC5hcHBseShvLmN0eCwgby5hcmd1bWVudHMpO1xyXG4gICAgICAgICAgICAgICAgby5pbW1lZGlhdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXRpbWVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBvLm1ldGhvZC5hcHBseShvLmN0eCwgby5hcmd1bWVudHMpO1xyXG4gICAgICAgICAgICAgICAgfSwgby53YWl0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG4gICAgc2V0RGF0YShlbGU6IEhUTUxFbGVtZW50LCBrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGlmIChlbGUuZGF0YXNldCkge1xyXG4gICAgICAgICAgICBlbGUuZGF0YXNldC5rZXkgPSB2YWx1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbGUuc2V0QXR0cmlidXRlKGBkYXRhLSR7a2V5fWAsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgZ2V0RGF0YShlbGU6IEhUTUxFbGVtZW50LCBrZXk6IHN0cmluZykge1xyXG4gICAgICAgIGlmIChlbGUuZGF0YXNldCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZWxlLmRhdGFzZXQua2V5O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlbGUuZ2V0QXR0cmlidXRlKGBkYXRhLSR7a2V5fWApO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzaG93KGVsZTogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBlbGUuc3R5bGUuY3NzVGV4dCArPSBgO2Rpc3BsYXkke3RoaXMuZ2V0RGF0YShlbGUsICdkaXNwbGF5JyB8fCAnYmxvY2snKX1gO1xyXG4gICAgfSxcclxuICAgIGhpZGUoZWxlOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IGRpc3BsYXlTdGF0dXMgPSB3aW5kb3cgJiYgd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlKS5kaXNwbGF5IHx8ICdibG9jayc7XHJcbiAgICAgICAgdGhpcy5zZXREYXRhKGVsZSwgJ2Rpc3BsYXknLCBkaXNwbGF5U3RhdHVzKTtcclxuICAgICAgICBlbGUuc3R5bGUuY3NzVGV4dCArPSAnO2Rpc3BsYXk6IG5vbmU7JztcclxuICAgIH0sXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB1dGlscztcclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi8uLi90eXBlcy9pbmRleC5kLnRzJyAvPlxyXG5cclxuaW1wb3J0IERyYWdnYWJsZSBmcm9tICcuL2pzL2NvbXBvbmVudHMvYXBwJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IERyYWdnYWJsZTtcclxuIiwiaW1wb3J0IERyYWdnYWJsZUNvcmUgZnJvbSAnLi9kcmFnZ2FibGUtY29yZSc7XHJcbmltcG9ydCB1dGlscyBmcm9tICcuLy4uL3V0aWxzL3V0aWxzJztcclxuZXhwb3J0IGludGVyZmFjZSBDb25maWdJbnRlcmZhY2Uge1xyXG4gICAgc2VsZWN0b3I6IHN0cmluZztcclxuICAgIGF4aXM/OiAnYm90aCcgfCAneCcgfCAneScgfCAnbm9uZSc7XHJcbiAgICBjdXJzb3I/OiBzdHJpbmc7XHJcbn1cclxuY2xhc3MgRHJhZ2dhYmxlIHtcclxuICAgIGRyYWdnYWJsZUNvcmU6IERyYWdnYWJsZUNvcmU7XHJcbiAgICBjb25maWc6IENvbmZpZ0ludGVyZmFjZTtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZzogQ29uZmlnSW50ZXJmYWNlKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSB1dGlscy5leHRlbmQoe1xyXG4gICAgICAgICAgICBheGlzOiAnYm90aCcsXHJcbiAgICAgICAgICAgIGN1cnNvcjogJ21vdmUnLFxyXG4gICAgICAgIH0sIGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5kcmFnZ2FibGVDb3JlID0gbmV3IERyYWdnYWJsZUNvcmUodGhpcy5jb25maWcpO1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgRHJhZ2dhYmxlO1xyXG4iLCJpbXBvcnQgdXRpbHMgZnJvbSAnLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCBldmVudHMgZnJvbSAnLi8uLi91dGlscy9ldmVudCc7XHJcbmltcG9ydCB7IENvbmZpZ0ludGVyZmFjZSB9IGZyb20gJy4vYXBwJztcclxuXHJcbmludGVyZmFjZSBEYXJnRGF0YUludGVyZmFjZSB7XHJcbiAgICAvLyB4IC0gZGVsdGFYID09PSBsYXN0WFxyXG4gICAgbm9kZT86IEhUTUxFbGVtZW50O1xyXG4gICAgeD86IG51bWJlcjtcclxuICAgIHk/OiBudW1iZXI7XHJcbiAgICBkZWx0YVg/OiBudW1iZXI7XHJcbiAgICBkZWx0YVk/OiBudW1iZXI7XHJcbiAgICBsYXN0WD86IG51bWJlcjtcclxuICAgIGxhc3RZPzogbnVtYmVyO1xyXG59XHJcblxyXG5jbGFzcyBEcmFnZ2FibGVDb3JlIHtcclxuICAgIGNvbmZpZzogQ29uZmlnSW50ZXJmYWNlO1xyXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIGRyYWdnaW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBkcmFnRGF0YTogRGFyZ0RhdGFJbnRlcmZhY2UgPSB7fTtcclxuICAgIHRyYW5zbGF0ZVg6IG51bWJlcjtcclxuICAgIHRyYW5zbGF0ZVk6IG51bWJlcjtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZzogQ29uZmlnSW50ZXJmYWNlKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSB1dGlscy4kKGNvbmZpZy5zZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuY3NzVGV4dCArPSBgY3Vyc29yOiAke3RoaXMuY29uZmlnLmN1cnNvcn1gO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudCgpO1xyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJFdmVudCgpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5zdGFydCwgKGU6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkRyYWdTdGFydChlLCB0aGlzLmRyYWdEYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5tb3ZlLCAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRyYWdEYXRhLmRlbHRhWCA9IGUuY2xpZW50WCAtIHRoaXMuZHJhZ0RhdGEueDtcclxuICAgICAgICAgICAgdGhpcy5kcmFnRGF0YS5kZWx0YVkgPSBlLmNsaWVudFkgLSB0aGlzLmRyYWdEYXRhLnk7XHJcbiAgICAgICAgICAgIHRoaXMub25EcmFnKGUsIHRoaXMuZHJhZ0RhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLnN0b3AsIChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ0RhdGEubGFzdFggPSBlLmNsaWVudFg7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ0RhdGEubGFzdFkgPSBlLmNsaWVudFk7XHJcbiAgICAgICAgICAgIHRoaXMub25EcmFnU3RvcChlLCB0aGlzLmRyYWdEYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG9uRHJhZ1N0YXJ0KGU6IE1vdXNlRXZlbnQsIGRhdGE/OiBEYXJnRGF0YUludGVyZmFjZSkge1xyXG4gICAgICAgIHRoaXMuZHJhZ2dpbmcgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IHRyYW5zU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMuY29udGFpbmVyKS50cmFuc2Zvcm07XHJcbiAgICAgICAgaWYgKHRyYW5zU3R5bGUgPT09ICdub25lJykge1xyXG4gICAgICAgICAgICB0aGlzLmRyYWdEYXRhLnggPSBlLmNsaWVudFg7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ0RhdGEueSA9IGUuY2xpZW50WTtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVYID0gMDtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVZID0gMDtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0cmFuczogYW55ID0gdHJhbnNTdHlsZS5zcGxpdCgnLCcpO1xyXG5cclxuICAgICAgICB0aGlzLnRyYW5zbGF0ZVggPSBOdW1iZXIodHJhbnNbdHJhbnMubGVuZ3RoIC0gMl0pO1xyXG4gICAgICAgIHRoaXMudHJhbnNsYXRlWSA9IE51bWJlcih0cmFuc1t0cmFucy5sZW5ndGggLSAxXS5zcGxpdCgnKScpWzBdKTtcclxuICAgICAgICB0aGlzLmRyYWdEYXRhLnggPSBlLmNsaWVudFggLSB0aGlzLnRyYW5zbGF0ZVg7XHJcbiAgICAgICAgdGhpcy5kcmFnRGF0YS55ID0gZS5jbGllbnRZIC0gdGhpcy50cmFuc2xhdGVZO1xyXG4gICAgfVxyXG4gICAgb25EcmFnKGU6IE1vdXNlRXZlbnQsIGRhdGE/OiBEYXJnRGF0YUludGVyZmFjZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmRyYWdnaW5nKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5jb25maWcuYXhpcykge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYm90aCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuY3NzVGV4dCArPSBgdHJhbnNmb3JtOiB0cmFuc2xhdGUoJHt0aGlzLmRyYWdEYXRhLmRlbHRhWH1weCwgJHt0aGlzLmRyYWdEYXRhLmRlbHRhWX1weClgO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAneCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuY3NzVGV4dCArPSBgdHJhbnNmb3JtOiB0cmFuc2xhdGUoJHt0aGlzLmRyYWdEYXRhLmRlbHRhWH1weCwgJHt0aGlzLnRyYW5zbGF0ZVl9cHgpYDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3knOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmNzc1RleHQgKz0gYHRyYW5zZm9ybTogdHJhbnNsYXRlKCR7dGhpcy50cmFuc2xhdGVYfXB4LCAke3RoaXMuZHJhZ0RhdGEuZGVsdGFZfXB4KWA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdub25lJzpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuY3NzVGV4dCArPSBgdHJhbnNmb3JtOiB0cmFuc2xhdGUoJHt0aGlzLmRyYWdEYXRhLmRlbHRhWH1weCwgJHt0aGlzLmRyYWdEYXRhLmRlbHRhWX1weClgO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uRHJhZ1N0b3AoZTogTW91c2VFdmVudCwgZGF0YT86IERhcmdEYXRhSW50ZXJmYWNlKSB7XHJcbiAgICAgICAgdGhpcy5kcmFnRGF0YS5kZWx0YVggPSB0aGlzLmRyYWdEYXRhLnggLSB0aGlzLmRyYWdEYXRhLmxhc3RYO1xyXG4gICAgICAgIHRoaXMuZHJhZ0RhdGEuZGVsdGFZID0gdGhpcy5kcmFnRGF0YS55IC0gdGhpcy5kcmFnRGF0YS5sYXN0WTtcclxuICAgICAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgRHJhZ2dhYmxlQ29yZTtcclxuIiwiXHJcbmV4cG9ydCBjb25zdCBldmVudHMgPSB7XHJcbiAgICBzdGFydDogJ21vdXNlZG93bicsXHJcbiAgICBtb3ZlOiAnbW91c2Vtb3ZlJyxcclxuICAgIHN0b3A6ICdtb3VzZXVwJyxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGV2ZW50cztcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==