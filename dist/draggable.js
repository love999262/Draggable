!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Draggable=e():t.Draggable=e()}(window,function(){return function(t){var e={};function a(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";a.r(e);var n={start:"mousedown",move:"mousemove",stop:"mouseup"},r=function(){function t(t){this.dragging=!1,this.dragData={},this.config=t,this.container=this.config.container,this.config.userSelector||(this.container.style.cssText+=";user-select: none"),this.container.style.cssText+=";cursor: "+this.config.cursor,this.registerEvent()}return t.prototype.registerEvent=function(){var t=this;this.container.addEventListener(n.start,function(e){t.onDragStart(e,t.dragData)}),document.addEventListener(n.move,function(e){t.dragData.deltaX=e.clientX-t.dragData.x,t.dragData.deltaY=e.clientY-t.dragData.y,t.onDrag(e,t.dragData)}),document.addEventListener(n.stop,function(e){t.dragData.lastX=e.clientX,t.dragData.lastY=e.clientY,t.onDragStop(e,t.dragData)})},t.prototype.onDragStart=function(t,e){this.dragging=!0;var a=getComputedStyle(this.container).transform;if("none"===a)return this.dragData.x=t.clientX,this.dragData.y=t.clientY,this.translateX=0,void(this.translateY=0);var n=a.split(",");this.translateX=Number(n[n.length-2]),this.translateY=Number(n[n.length-1].split(")")[0]),this.dragData.x=t.clientX-this.translateX,this.dragData.y=t.clientY-this.translateY},t.prototype.onDrag=function(t,e){if(this.dragging)switch(this.config.axis){case"both":this.container.style.cssText+=";transform: translate("+this.dragData.deltaX+"px, "+this.dragData.deltaY+"px)";break;case"x":this.container.style.cssText+=";transform: translate("+this.dragData.deltaX+"px, "+this.translateY+"px)";break;case"y":this.container.style.cssText+=";transform: translate("+this.translateX+"px, "+this.dragData.deltaY+"px)";break;case"none":break;default:this.container.style.cssText+=";transform: translate("+this.dragData.deltaX+"px, "+this.dragData.deltaY+"px)"}},t.prototype.onDragStop=function(t,e){this.dragData.deltaX=this.dragData.x-this.dragData.lastX,this.dragData.deltaY=this.dragData.y-this.dragData.lastY,this.dragging=!1},t}(),i={$:function(t){return document.querySelectorAll(t)},extend:function(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];var n=t||{};return n instanceof Object&&e.forEach(function(t){t instanceof Object&&Object.keys(t).forEach(function(e){switch(Object.prototype.toString.call(t[e])){case"[object Object]":t[e]=i.extend(n[e],t[e])}n[e]=t[e]})}),n},parseToDOM:function(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]},find:function(t,e){return t.querySelector(e)},addClass:function(t,e){var a=t.getAttribute("class");a+=" "+e,t.setAttribute("class",a)},removeClass:function(t,e){t.getAttribute("class").replace(e,"")},throttle:function(t){var e,a=this.extend({method:function(){},wait:1e3,ctx:this,immediate:!0,arguments:[]},t);return function(){a.immediate&&(a.method.apply(a.ctx,a.arguments),a.immediate=!1),e||(e=setTimeout(function(){e=null,a.method.apply(a.ctx,a.arguments)},a.wait))}},setData:function(t,e,a){t.dataset?t.dataset.key=a:t.setAttribute("data-"+e,a)},getData:function(t,e){return t.dataset?t.dataset.key:t.getAttribute("data-"+e)},show:function(t){t.style.cssText+=";display"+this.getData(t,"display")},hide:function(t){var e=window&&window.getComputedStyle(t).display||"block";this.setData(t,"display",e),t.style.cssText+=";display: none;"}},o=i,s=function(){return function(t){var e=this;this.config=o.extend({axis:"both",cursor:"move",userSelect:!1},t);var a=o.$(this.config.selector);Array.prototype.forEach.call(a,function(t){var a=o.extend(e.config,{container:t});new r(a)})}}();e.default=s}]).default});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9EcmFnZ2FibGUvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL0RyYWdnYWJsZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9EcmFnZ2FibGUvLi9zcmMvanMvdXRpbHMvZXZlbnQudHMiLCJ3ZWJwYWNrOi8vRHJhZ2dhYmxlLy4vc3JjL2pzL2NvbXBvbmVudHMvZHJhZ2dhYmxlLWNvcmUudHMiLCJ3ZWJwYWNrOi8vRHJhZ2dhYmxlLy4vc3JjL2pzL3V0aWxzL3V0aWxzLnRzIiwid2VicGFjazovL0RyYWdnYWJsZS8uL3NyYy9qcy9jb21wb25lbnRzL2FwcC50cyIsIndlYnBhY2s6Ly9EcmFnZ2FibGUvLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInV0aWxzX2V2ZW50Iiwic3RhcnQiLCJtb3ZlIiwic3RvcCIsImRyYWdnYWJsZV9jb3JlIiwiRHJhZ2dhYmxlQ29yZSIsImNvbmZpZyIsInRoaXMiLCJkcmFnZ2luZyIsImRyYWdEYXRhIiwiY29udGFpbmVyIiwidXNlclNlbGVjdG9yIiwic3R5bGUiLCJjc3NUZXh0IiwiY3Vyc29yIiwicmVnaXN0ZXJFdmVudCIsIl90aGlzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJvbkRyYWdTdGFydCIsImRvY3VtZW50IiwiZGVsdGFYIiwiY2xpZW50WCIsIngiLCJkZWx0YVkiLCJjbGllbnRZIiwieSIsIm9uRHJhZyIsImxhc3RYIiwibGFzdFkiLCJvbkRyYWdTdG9wIiwiZGF0YSIsInRyYW5zU3R5bGUiLCJnZXRDb21wdXRlZFN0eWxlIiwidHJhbnNmb3JtIiwidHJhbnNsYXRlWCIsInRyYW5zbGF0ZVkiLCJ0cmFucyIsInNwbGl0IiwiTnVtYmVyIiwibGVuZ3RoIiwiYXhpcyIsInV0aWxzIiwiJCIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvckFsbCIsImV4dGVuZCIsInRhcmdldCIsImFyZ3MiLCJfaSIsImFyZ3VtZW50cyIsInJlc3VsdCIsImZvckVhY2giLCJvYmoiLCJrZXlzIiwidG9TdHJpbmciLCJwYXJzZVRvRE9NIiwic3RyIiwiZWxlIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsImNoaWxkcmVuIiwiZmluZCIsInBhcmVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRDbGFzcyIsImNsYXNzTmFtZSIsInRtcENsYXNzIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQ2xhc3MiLCJyZXBsYWNlIiwidGhyb3R0bGUiLCJjb2YiLCJ0aW1lciIsIm1ldGhvZCIsIndhaXQiLCJjdHgiLCJpbW1lZGlhdGUiLCJhcHBseSIsInNldFRpbWVvdXQiLCJzZXREYXRhIiwiZGF0YXNldCIsImdldERhdGEiLCJzaG93IiwiaGlkZSIsImRpc3BsYXlTdGF0dXMiLCJkaXNwbGF5IiwidXRpbHNfdXRpbHMiLCJhcHAiLCJ1c2VyU2VsZWN0Iiwibm9kZUxpc3QiLCJBcnJheSIsIml0ZW0iLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxJQUNBLG1CQUFBRyxlQUFBQyxJQUNB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QUFLRCxPQUFPc0MsVUFDckNnRCxNQUFNaEcsVUFBVXdELFFBQVFqRixLQUFLd0gsRUFBVSxTQUFDRSxHQUNwQyxJQUFNdkYsRUFBU2tGLEVBQU0xQyxPQUFPOUIsRUFBS1YsUUFDN0JJLFVBQVdtRixJQUVmLElBQUl6RixFQUFjRSxNQWI5QixHQ0xBd0YsRUFBQSIsImZpbGUiOiJkcmFnZ2FibGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJEcmFnZ2FibGVcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiRHJhZ2dhYmxlXCJdID0gZmFjdG9yeSgpO1xufSkod2luZG93LCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJcclxuZXhwb3J0IGNvbnN0IGV2ZW50cyA9IHtcclxuICAgIHN0YXJ0OiAnbW91c2Vkb3duJyxcclxuICAgIG1vdmU6ICdtb3VzZW1vdmUnLFxyXG4gICAgc3RvcDogJ21vdXNldXAnLFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZXZlbnRzO1xyXG4iLCJpbXBvcnQgdXRpbHMgZnJvbSAnLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCBldmVudHMgZnJvbSAnLi8uLi91dGlscy9ldmVudCc7XHJcbmltcG9ydCB7IENvbmZpZ0ludGVyZmFjZSB9IGZyb20gJy4vYXBwJztcclxuXHJcbmludGVyZmFjZSBEYXJnRGF0YUludGVyZmFjZSB7XHJcbiAgICAvLyB4IC0gZGVsdGFYID09PSBsYXN0WFxyXG4gICAgbm9kZT86IEhUTUxFbGVtZW50O1xyXG4gICAgeD86IG51bWJlcjtcclxuICAgIHk/OiBudW1iZXI7XHJcbiAgICBkZWx0YVg/OiBudW1iZXI7XHJcbiAgICBkZWx0YVk/OiBudW1iZXI7XHJcbiAgICBsYXN0WD86IG51bWJlcjtcclxuICAgIGxhc3RZPzogbnVtYmVyO1xyXG59XHJcblxyXG5jbGFzcyBEcmFnZ2FibGVDb3JlIHtcclxuICAgIGNvbmZpZzogQ29uZmlnSW50ZXJmYWNlO1xyXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIGRyYWdnaW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBkcmFnRGF0YTogRGFyZ0RhdGFJbnRlcmZhY2UgPSB7fTtcclxuICAgIHRyYW5zbGF0ZVg6IG51bWJlcjtcclxuICAgIHRyYW5zbGF0ZVk6IG51bWJlcjtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZzogQ29uZmlnSW50ZXJmYWNlKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSB0aGlzLmNvbmZpZy5jb250YWluZXI7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy51c2VyU2VsZWN0b3IpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuY3NzVGV4dCArPSAnO3VzZXItc2VsZWN0OiBub25lJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuY3NzVGV4dCArPSBgO2N1cnNvcjogJHt0aGlzLmNvbmZpZy5jdXJzb3J9YDtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoKTtcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyRXZlbnQoKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMuc3RhcnQsIChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25EcmFnU3RhcnQoZSwgdGhpcy5kcmFnRGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudHMubW92ZSwgKGU6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kcmFnRGF0YS5kZWx0YVggPSBlLmNsaWVudFggLSB0aGlzLmRyYWdEYXRhLng7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ0RhdGEuZGVsdGFZID0gZS5jbGllbnRZIC0gdGhpcy5kcmFnRGF0YS55O1xyXG4gICAgICAgICAgICB0aGlzLm9uRHJhZyhlLCB0aGlzLmRyYWdEYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50cy5zdG9wLCAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRyYWdEYXRhLmxhc3RYID0gZS5jbGllbnRYO1xyXG4gICAgICAgICAgICB0aGlzLmRyYWdEYXRhLmxhc3RZID0gZS5jbGllbnRZO1xyXG4gICAgICAgICAgICB0aGlzLm9uRHJhZ1N0b3AoZSwgdGhpcy5kcmFnRGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBvbkRyYWdTdGFydChlOiBNb3VzZUV2ZW50LCBkYXRhPzogRGFyZ0RhdGFJbnRlcmZhY2UpIHtcclxuICAgICAgICB0aGlzLmRyYWdnaW5nID0gdHJ1ZTtcclxuICAgICAgICBjb25zdCB0cmFuc1N0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNvbnRhaW5lcikudHJhbnNmb3JtO1xyXG4gICAgICAgIGlmICh0cmFuc1N0eWxlID09PSAnbm9uZScpIHtcclxuICAgICAgICAgICAgdGhpcy5kcmFnRGF0YS54ID0gZS5jbGllbnRYO1xyXG4gICAgICAgICAgICB0aGlzLmRyYWdEYXRhLnkgPSBlLmNsaWVudFk7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlWCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlWSA9IDA7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdHJhbnM6IGFueSA9IHRyYW5zU3R5bGUuc3BsaXQoJywnKTtcclxuXHJcbiAgICAgICAgdGhpcy50cmFuc2xhdGVYID0gTnVtYmVyKHRyYW5zW3RyYW5zLmxlbmd0aCAtIDJdKTtcclxuICAgICAgICB0aGlzLnRyYW5zbGF0ZVkgPSBOdW1iZXIodHJhbnNbdHJhbnMubGVuZ3RoIC0gMV0uc3BsaXQoJyknKVswXSk7XHJcbiAgICAgICAgdGhpcy5kcmFnRGF0YS54ID0gZS5jbGllbnRYIC0gdGhpcy50cmFuc2xhdGVYO1xyXG4gICAgICAgIHRoaXMuZHJhZ0RhdGEueSA9IGUuY2xpZW50WSAtIHRoaXMudHJhbnNsYXRlWTtcclxuICAgIH1cclxuICAgIG9uRHJhZyhlOiBNb3VzZUV2ZW50LCBkYXRhPzogRGFyZ0RhdGFJbnRlcmZhY2UpIHtcclxuICAgICAgICBpZiAodGhpcy5kcmFnZ2luZykge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuY29uZmlnLmF4aXMpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2JvdGgnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmNzc1RleHQgKz0gYDt0cmFuc2Zvcm06IHRyYW5zbGF0ZSgke3RoaXMuZHJhZ0RhdGEuZGVsdGFYfXB4LCAke3RoaXMuZHJhZ0RhdGEuZGVsdGFZfXB4KWA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICd4JzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ICs9IGA7dHJhbnNmb3JtOiB0cmFuc2xhdGUoJHt0aGlzLmRyYWdEYXRhLmRlbHRhWH1weCwgJHt0aGlzLnRyYW5zbGF0ZVl9cHgpYDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3knOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmNzc1RleHQgKz0gYDt0cmFuc2Zvcm06IHRyYW5zbGF0ZSgke3RoaXMudHJhbnNsYXRlWH1weCwgJHt0aGlzLmRyYWdEYXRhLmRlbHRhWX1weClgO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbm9uZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmNzc1RleHQgKz0gYDt0cmFuc2Zvcm06IHRyYW5zbGF0ZSgke3RoaXMuZHJhZ0RhdGEuZGVsdGFYfXB4LCAke3RoaXMuZHJhZ0RhdGEuZGVsdGFZfXB4KWA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25EcmFnU3RvcChlOiBNb3VzZUV2ZW50LCBkYXRhPzogRGFyZ0RhdGFJbnRlcmZhY2UpIHtcclxuICAgICAgICB0aGlzLmRyYWdEYXRhLmRlbHRhWCA9IHRoaXMuZHJhZ0RhdGEueCAtIHRoaXMuZHJhZ0RhdGEubGFzdFg7XHJcbiAgICAgICAgdGhpcy5kcmFnRGF0YS5kZWx0YVkgPSB0aGlzLmRyYWdEYXRhLnkgLSB0aGlzLmRyYWdEYXRhLmxhc3RZO1xyXG4gICAgICAgIHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBEcmFnZ2FibGVDb3JlO1xyXG4iLCJjb25zdCB1dGlscyA9IHtcclxuICAgICQoc2VsZWN0b3I6IHN0cmluZyk6IE5vZGVMaXN0IHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XHJcbiAgICB9LFxyXG4gICAgZXh0ZW5kKHRhcmdldDogYW55LCAuLi5hcmdzOiBhbnlbXSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRhcmdldCB8fCB7fTtcclxuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGFyZ3MuZm9yRWFjaCgob2JqOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmpba2V5XSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgT2JqZWN0XSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqW2tleV0gPSB1dGlscy5leHRlbmQocmVzdWx0W2tleV0sIG9ialtrZXldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IG9ialtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0sXHJcbiAgICBwYXJzZVRvRE9NKHN0cjogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgZWxlLmlubmVySFRNTCA9IHN0cjtcclxuICAgICAgICByZXR1cm4gZWxlLmNoaWxkcmVuWzBdO1xyXG4gICAgfSxcclxuICAgIGZpbmQocGFyZW50OiBIVE1MRWxlbWVudCwgY2hpbGRyZW46IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBwYXJlbnQucXVlcnlTZWxlY3RvcihjaGlsZHJlbik7XHJcbiAgICB9LFxyXG4gICAgYWRkQ2xhc3MoZWxlOiBIVE1MRWxlbWVudCwgY2xhc3NOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgdG1wQ2xhc3M6IHN0cmluZyA9IGVsZS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyk7XHJcbiAgICAgICAgdG1wQ2xhc3MgKz0gYCAke2NsYXNzTmFtZX1gO1xyXG4gICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgdG1wQ2xhc3MpO1xyXG4gICAgfSxcclxuICAgIHJlbW92ZUNsYXNzKGVsZTogSFRNTEVsZW1lbnQsIGNsYXNzTmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgdG1wQ2xhc3MgPSBlbGUuZ2V0QXR0cmlidXRlKCdjbGFzcycpO1xyXG4gICAgICAgIHRtcENsYXNzLnJlcGxhY2UoY2xhc3NOYW1lLCAnJyk7XHJcbiAgICB9LFxyXG4gICAgdGhyb3R0bGUoY29mOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBvID0gdGhpcy5leHRlbmQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6ICgpID0+IHt9LCBcclxuICAgICAgICAgICAgd2FpdDogMTAwMCxcclxuICAgICAgICAgICAgY3R4OiB0aGlzLFxyXG4gICAgICAgICAgICBpbW1lZGlhdGU6IHRydWUsXHJcbiAgICAgICAgICAgIGFyZ3VtZW50czogW10sXHJcbiAgICAgICAgfSwgY29mKTtcclxuICAgICAgICBsZXQgdGltZXI6IG51bWJlcjtcclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoby5pbW1lZGlhdGUpIHtcclxuICAgICAgICAgICAgICAgIG8ubWV0aG9kLmFwcGx5KG8uY3R4LCBvLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICBvLmltbWVkaWF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghdGltZXIpIHtcclxuICAgICAgICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIG8ubWV0aG9kLmFwcGx5KG8uY3R4LCBvLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICB9LCBvLndhaXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcbiAgICBzZXREYXRhKGVsZTogSFRNTEVsZW1lbnQsIGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKGVsZS5kYXRhc2V0KSB7XHJcbiAgICAgICAgICAgIGVsZS5kYXRhc2V0LmtleSA9IHZhbHVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoYGRhdGEtJHtrZXl9YCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBnZXREYXRhKGVsZTogSFRNTEVsZW1lbnQsIGtleTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKGVsZS5kYXRhc2V0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlbGUuZGF0YXNldC5rZXk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsZS5nZXRBdHRyaWJ1dGUoYGRhdGEtJHtrZXl9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNob3coZWxlOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGVsZS5zdHlsZS5jc3NUZXh0ICs9IGA7ZGlzcGxheSR7dGhpcy5nZXREYXRhKGVsZSwgJ2Rpc3BsYXknIHx8ICdibG9jaycpfWA7XHJcbiAgICB9LFxyXG4gICAgaGlkZShlbGU6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgZGlzcGxheVN0YXR1cyA9IHdpbmRvdyAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGUpLmRpc3BsYXkgfHwgJ2Jsb2NrJztcclxuICAgICAgICB0aGlzLnNldERhdGEoZWxlLCAnZGlzcGxheScsIGRpc3BsYXlTdGF0dXMpO1xyXG4gICAgICAgIGVsZS5zdHlsZS5jc3NUZXh0ICs9ICc7ZGlzcGxheTogbm9uZTsnO1xyXG4gICAgfSxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHV0aWxzO1xyXG4iLCJpbXBvcnQgRHJhZ2dhYmxlQ29yZSBmcm9tICcuL2RyYWdnYWJsZS1jb3JlJztcclxuaW1wb3J0IHV0aWxzIGZyb20gJy4vLi4vdXRpbHMvdXRpbHMnO1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpZ0ludGVyZmFjZSB7XHJcbiAgICBzZWxlY3Rvcjogc3RyaW5nO1xyXG4gICAgYXhpcz86ICdib3RoJyB8ICd4JyB8ICd5JyB8ICdub25lJztcclxuICAgIGN1cnNvcj86IHN0cmluZztcclxuICAgIHVzZXJTZWxlY3Rvcj86IGJvb2xlYW47XHJcbiAgICBjb250YWluZXI/OiBIVE1MRWxlbWVudDtcclxufVxyXG5jbGFzcyBEcmFnZ2FibGUge1xyXG4gICAgY29uZmlnOiBDb25maWdJbnRlcmZhY2U7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWc6IENvbmZpZ0ludGVyZmFjZSkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gdXRpbHMuZXh0ZW5kKHtcclxuICAgICAgICAgICAgYXhpczogJ2JvdGgnLFxyXG4gICAgICAgICAgICBjdXJzb3I6ICdtb3ZlJyxcclxuICAgICAgICAgICAgdXNlclNlbGVjdDogZmFsc2UsXHJcbiAgICAgICAgfSwgY29uZmlnKTtcclxuICAgICAgICBjb25zdCBub2RlTGlzdCA9IHV0aWxzLiQodGhpcy5jb25maWcuc2VsZWN0b3IpO1xyXG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwobm9kZUxpc3QsIChpdGVtOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSB1dGlscy5leHRlbmQodGhpcy5jb25maWcsIHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogaXRlbSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5ldyBEcmFnZ2FibGVDb3JlKGNvbmZpZyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgRHJhZ2dhYmxlO1xyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLy4uL3R5cGVzL2luZGV4LmQudHMnIC8+XHJcblxyXG5pbXBvcnQgRHJhZ2dhYmxlIGZyb20gJy4vanMvY29tcG9uZW50cy9hcHAnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgRHJhZ2dhYmxlO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9